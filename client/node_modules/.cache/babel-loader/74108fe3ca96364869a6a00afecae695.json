{"ast":null,"code":"import { REGISTER_SUCCESS, REGISTER_FAIL, LOGIN_SUCCESS, LOGIN_FAIL, USER_LOADED, AUTH_ERROR, LOGOUT, ADD_SAVED_VID, REMOVE_SAVED_VID, ACCOUNT_DELETED } from \"../actions/ActionTypes\";\nexport const initialState = {\n  token: localStorage.getItem(\"token\"),\n  isAuthenticated: null,\n  loading: true,\n  user: null\n};\n\nconst AuthenticateReducer = (state = initialState, action) => {\n  const {\n    payload,\n    type\n  } = action;\n\n  switch (type) {\n    case USER_LOADED:\n      return { ...state,\n        isAuthenticated: true,\n        loading: false,\n        user: payload\n      };\n\n    case REGISTER_SUCCESS:\n    case LOGIN_SUCCESS:\n      localStorage.setItem(\"token\", payload.token);\n      return { ...state,\n        ...payload,\n        isAuthenticated: true,\n        loading: false\n      };\n\n    case ADD_SAVED_VID:\n      return { ...state,\n        user: { ...state.user,\n          savedVids: payload\n        }\n      };\n\n    case REMOVE_SAVED_VID:\n      return { ...state,\n        user: { ...state.user,\n          savedVids: { ...state.user.savedVids.filter(vid => vid._id !== payload)\n          }\n        }\n      };\n\n    case REGISTER_FAIL:\n    case AUTH_ERROR:\n    case LOGIN_FAIL:\n    case LOGOUT:\n    case ACCOUNT_DELETED:\n      localStorage.removeItem(\"token\");\n      return { ...state,\n        token: null,\n        isAuthenticated: false,\n        loading: false\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default AuthenticateReducer; // function updateVeryNestedField(state, action) {\n//   return {\n//       ...state,\n//       first : {\n//           ...state.first,\n//           second : {\n//               ...state.first.second,\n//               [action.someId] : {\n//                   ...state.first.second[action.someId],\n//                   fourth : action.someValue\n//               }\n//           }\n//       }\n//   }\n// }","map":{"version":3,"sources":["/Users/joshuastevenson/Desktop/Websites/xhkd/client/src/store/reducers/AuthenticateReducer.js"],"names":["REGISTER_SUCCESS","REGISTER_FAIL","LOGIN_SUCCESS","LOGIN_FAIL","USER_LOADED","AUTH_ERROR","LOGOUT","ADD_SAVED_VID","REMOVE_SAVED_VID","ACCOUNT_DELETED","initialState","token","localStorage","getItem","isAuthenticated","loading","user","AuthenticateReducer","state","action","payload","type","setItem","savedVids","filter","vid","_id","removeItem"],"mappings":"AAAA,SACEA,gBADF,EAEEC,aAFF,EAGEC,aAHF,EAIEC,UAJF,EAKEC,WALF,EAMEC,UANF,EAOEC,MAPF,EAQEC,aARF,EASEC,gBATF,EAUEC,eAVF,QAWO,wBAXP;AAaA,OAAO,MAAMC,YAAY,GAAG;AAC1BC,EAAAA,KAAK,EAAEC,YAAY,CAACC,OAAb,CAAqB,OAArB,CADmB;AAE1BC,EAAAA,eAAe,EAAE,IAFS;AAG1BC,EAAAA,OAAO,EAAE,IAHiB;AAI1BC,EAAAA,IAAI,EAAE;AAJoB,CAArB;;AAOP,MAAMC,mBAAmB,GAAG,CAACC,KAAK,GAAGR,YAAT,EAAuBS,MAAvB,KAAkC;AAC5D,QAAM;AAAEC,IAAAA,OAAF;AAAWC,IAAAA;AAAX,MAAoBF,MAA1B;;AACA,UAAQE,IAAR;AACE,SAAKjB,WAAL;AACE,aAAO,EACL,GAAGc,KADE;AAELJ,QAAAA,eAAe,EAAE,IAFZ;AAGLC,QAAAA,OAAO,EAAE,KAHJ;AAILC,QAAAA,IAAI,EAAEI;AAJD,OAAP;;AAMF,SAAKpB,gBAAL;AACA,SAAKE,aAAL;AACEU,MAAAA,YAAY,CAACU,OAAb,CAAqB,OAArB,EAA8BF,OAAO,CAACT,KAAtC;AACA,aAAO,EACL,GAAGO,KADE;AAEL,WAAGE,OAFE;AAGLN,QAAAA,eAAe,EAAE,IAHZ;AAILC,QAAAA,OAAO,EAAE;AAJJ,OAAP;;AAMF,SAAKR,aAAL;AACE,aAAO,EACL,GAAGW,KADE;AAELF,QAAAA,IAAI,EAAE,EACJ,GAAGE,KAAK,CAACF,IADL;AAEJO,UAAAA,SAAS,EAAEH;AAFP;AAFD,OAAP;;AAOF,SAAKZ,gBAAL;AACE,aAAO,EACL,GAAGU,KADE;AAELF,QAAAA,IAAI,EAAE,EACJ,GAAGE,KAAK,CAACF,IADL;AAEJO,UAAAA,SAAS,EAAE,EACT,GAAGL,KAAK,CAACF,IAAN,CAAWO,SAAX,CAAqBC,MAArB,CAA4BC,GAAG,IAAIA,GAAG,CAACC,GAAJ,KAAYN,OAA/C;AADM;AAFP;AAFD,OAAP;;AASF,SAAKnB,aAAL;AACA,SAAKI,UAAL;AACA,SAAKF,UAAL;AACA,SAAKG,MAAL;AACA,SAAKG,eAAL;AACEG,MAAAA,YAAY,CAACe,UAAb,CAAwB,OAAxB;AACA,aAAO,EACL,GAAGT,KADE;AAELP,QAAAA,KAAK,EAAE,IAFF;AAGLG,QAAAA,eAAe,EAAE,KAHZ;AAILC,QAAAA,OAAO,EAAE;AAJJ,OAAP;;AAMF;AACE,aAAOG,KAAP;AAhDJ;AAkDD,CApDD;;AAsDA,eAAeD,mBAAf,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["import {\n  REGISTER_SUCCESS,\n  REGISTER_FAIL,\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  USER_LOADED,\n  AUTH_ERROR,\n  LOGOUT,\n  ADD_SAVED_VID,\n  REMOVE_SAVED_VID,\n  ACCOUNT_DELETED\n} from \"../actions/ActionTypes\";\n\nexport const initialState = {\n  token: localStorage.getItem(\"token\"),\n  isAuthenticated: null,\n  loading: true,\n  user: null\n};\n\nconst AuthenticateReducer = (state = initialState, action) => {\n  const { payload, type } = action;\n  switch (type) {\n    case USER_LOADED:\n      return {\n        ...state,\n        isAuthenticated: true,\n        loading: false,\n        user: payload\n      };\n    case REGISTER_SUCCESS:\n    case LOGIN_SUCCESS:\n      localStorage.setItem(\"token\", payload.token);\n      return {\n        ...state,\n        ...payload,\n        isAuthenticated: true,\n        loading: false\n      };\n    case ADD_SAVED_VID:\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          savedVids: payload\n        }\n      };\n    case REMOVE_SAVED_VID:\n      return {\n        ...state,\n        user: {\n          ...state.user,\n          savedVids: {\n            ...state.user.savedVids.filter(vid => vid._id !== payload)\n          }\n        }\n      };\n    case REGISTER_FAIL:\n    case AUTH_ERROR:\n    case LOGIN_FAIL:\n    case LOGOUT:\n    case ACCOUNT_DELETED:\n      localStorage.removeItem(\"token\");\n      return {\n        ...state,\n        token: null,\n        isAuthenticated: false,\n        loading: false\n      };\n    default:\n      return state;\n  }\n};\n\nexport default AuthenticateReducer;\n\n// function updateVeryNestedField(state, action) {\n//   return {\n//       ...state,\n//       first : {\n//           ...state.first,\n//           second : {\n//               ...state.first.second,\n//               [action.someId] : {\n//                   ...state.first.second[action.someId],\n//                   fourth : action.someValue\n//               }\n//           }\n//       }\n//   }\n// }\n"]},"metadata":{},"sourceType":"module"}